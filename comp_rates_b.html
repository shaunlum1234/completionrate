<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://vega.github.io/vega/assets/promise.min.js"></script>
    <script src="https://vega.github.io/vega/assets/symbol.min.js"></script>
    <script src="https://vega.github.io/vega/assets/fetch.min.js"></script>
    <script src="https://vega.github.io/vega/vega.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    
</head>
<body>
  <h1>This should be a big heading for Student Success</h1>
    <br><br><br>
    <p>This is a paragraph I am writing</p>
    <br>

    <div id="view"></div>
    <script type="text/javascript">
      var view;
       var district=""
      fetch('https://raw.githubusercontent.com/StevenjHiggs90/G2G/master/completion_rates_b.json')
        .then(res => res.json())
        .then(spec => render(spec,getUrlParameter('district')))
        .catch(err => console.error(err));
      console.log(district);

  
      function render(spec,district) {
        console.log(district);
        //This is what we pull from a record in json
        var data_64 = [{
    "Subpop": "ABORIGINAL",
    "Completion Rate": ".57",
    "records": "70",
    "district": "Southeast Kootenay",
    "School Year": "2004/2005"
  },
  {
    "Subpop": "ALL STUDENTS",
    "Completion Rate": ".88",
    "records": "651",
    "district": "Southeast Kootenay",
    "School Year": "2004/2005"
  },
  {
    "Subpop": "ABORIGINAL",
    "Completion Rate": ".66",
    "records": "79",
    "district": "Southeast Kootenay",
    "School Year": "2005/2006"
  },
  {
    "Subpop": "ALL STUDENTS",
    "Completion Rate": ".86",
    "records": "647",
    "district": "Southeast Kootenay",
    "School Year": "2005/2006"
  },
  {
    "Subpop": "ABORIGINAL",
    "Completion Rate": ".68",
    "records": "90",
    "district": "Southeast Kootenay",
    "School Year": "2006/2007"
  },
  {
    "Subpop": "ALL STUDENTS",
    "Completion Rate": ".81",
    "records": "627",
    "district": "Southeast Kootenay",
    "School Year": "2006/2007"
  },
  {
    "Subpop": "ABORIGINAL",
    "Completion Rate": ".61",
    "records": "81",
    "district": "Southeast Kootenay",
    "School Year": "2007/2008"
  },
  {
    "Subpop": "ALL STUDENTS",
    "Completion Rate": ".84",
    "records": "594",
    "district": "Southeast Kootenay",
    "School Year": "2007/2008"
  },
  {
    "Subpop": "ABORIGINAL",
    "Completion Rate": ".69",
    "records": "83",
    "district": "Southeast Kootenay",
    "School Year": "2008/2009"
  },
  {
    "Subpop": "ALL STUDENTS",
    "Completion Rate": ".74",
    "records": "637",
    "district": "Southeast Kootenay",
    "School Year": "2008/2009"
  },
  {
    "Subpop": "ABORIGINAL",
    "Completion Rate": ".67",
    "records": "80",
    "district": "Southeast Kootenay",
    "School Year": "2009/2010"
  },
  {
    "Subpop": "ALL STUDENTS",
    "Completion Rate": ".81",
    "records": "628",
    "district": "Southeast Kootenay",
    "School Year": "2009/2010"
  },
  {
    "Subpop": "ABORIGINAL",
    "Completion Rate": ".56",
    "records": "91",
    "district": "Southeast Kootenay",
    "School Year": "2010/2011"
  },
  {
    "Subpop": "ALL STUDENTS",
    "Completion Rate": ".75",
    "records": "594",
    "district": "Southeast Kootenay",
    "School Year": "2010/2011"
  },
  {
    "Subpop": "ABORIGINAL",
    "Completion Rate": ".57",
    "records": "77",
    "district": "Southeast Kootenay",
    "School Year": "2011/2012"
  },
  {
    "Subpop": "ALL STUDENTS",
    "Completion Rate": ".77",
    "records": "578",
    "district": "Southeast Kootenay",
    "School Year": "2011/2012"
  },
  {
    "Subpop": "ABORIGINAL",
    "Completion Rate": ".74",
    "records": "105",
    "district": "Southeast Kootenay",
    "School Year": "2012/2013"
  },
  {
    "Subpop": "ALL STUDENTS",
    "Completion Rate": ".79",
    "records": "607",
    "district": "Southeast Kootenay",
    "School Year": "2012/2013"
  },
  {
    "Subpop": "ABORIGINAL",
    "Completion Rate": ".75",
    "records": "81",
    "district": "Southeast Kootenay",
    "School Year": "2013/2014"
  },
  {
    "Subpop": "ALL STUDENTS",
    "Completion Rate": ".78",
    "records": "557",
    "district": "Southeast Kootenay",
    "School Year": "2013/2014"
  },
  {
    "Subpop": "ABORIGINAL",
    "Completion Rate": ".76",
    "records": "80",
    "district": "Southeast Kootenay",
    "School Year": "2014/2015"
  },
  {
    "Subpop": "ALL STUDENTS",
    "Completion Rate": ".77",
    "records": "559",
    "district": "Southeast Kootenay",
    "School Year": "2014/2015"
  },
  {
    "Subpop": "ABORIGINAL",
    "Completion Rate": ".81",
    "records": "65",
    "district": "Southeast Kootenay",
    "School Year": "2015/2016"
  },
  {
    "Subpop": "ALL STUDENTS",
    "Completion Rate": ".77",
    "records": "576",
    "district": "Southeast Kootenay",
    "School Year": "2015/2016"
  },
  {
    "Subpop": "ABORIGINAL",
    "Completion Rate": ".74",
    "records": "97",
    "district": "Southeast Kootenay",
    "School Year": "2016/2017"
  },
  {
    "Subpop": "ALL STUDENTS",
    "Completion Rate": ".73",
    "records": "565",
    "district": "Southeast Kootenay",
    "School Year": "2016/2017"
  },
  {
    "Subpop": "ABORIGINAL",
    "Completion Rate": ".83",
    "records": "83",
    "district": "Southeast Kootenay",
    "School Year": "2017/2018"
  },
  {
    "Subpop": "ALL STUDENTS",
    "Completion Rate": ".84",
    "records": "524",
    "district": "Southeast Kootenay",
    "School Year": "2017/2018"
  },
  {
    "Subpop": "ABORIGINAL",
    "Completion Rate": ".7",
    "records": "47",
    "district": "Rocky Mountain",
    "School Year": "2004/2005"
  },
  {
    "Subpop": "ALL STUDENTS",
    "Completion Rate": ".84",
    "records": "384",
    "district": "Rocky Mountain",
    "School Year": "2004/2005"
  },
  {
    "Subpop": "ABORIGINAL",
    "Completion Rate": ".75",
    "records": "56",
    "district": "Rocky Mountain",
    "School Year": "2005/2006"
  },
  {
    "Subpop": "ALL STUDENTS",
    "Completion Rate": ".85",
    "records": "364",
    "district": "Rocky Mountain",
    "School Year": "2005/2006"
  },
  {
    "Subpop": "ABORIGINAL",
    "Completion Rate": ".76",
    "records": "66",
    "district": "Rocky Mountain",
    "School Year": "2006/2007"
  },
  {
    "Subpop": "ALL STUDENTS",
    "Completion Rate": ".82",
    "records": "376",
    "district": "Rocky Mountain",
    "School Year": "2006/2007"
  },
  {
    "Subpop": "ABORIGINAL",
    "Completion Rate": ".55",
    "records": "55",
    "district": "Rocky Mountain",
    "School Year": "2007/2008"
  },
  {
    "Subpop": "ALL STUDENTS",
    "Completion Rate": ".86",
    "records": "375",
    "district": "Rocky Mountain",
    "School Year": "2007/2008"
  },
  {
    "Subpop": "ABORIGINAL",
    "Completion Rate": ".64",
    "records": "60",
    "district": "Rocky Mountain",
    "School Year": "2008/2009"
  },
  {
    "Subpop": "ALL STUDENTS",
    "Completion Rate": ".78",
    "records": "362",
    "district": "Rocky Mountain",
    "School Year": "2008/2009"
  },
  {
    "Subpop": "ABORIGINAL",
    "Completion Rate": ".56",
    "records": "64",
    "district": "Rocky Mountain",
    "School Year": "2009/2010"
  },
  {
    "Subpop": "ALL STUDENTS",
    "Completion Rate": ".79",
    "records": "387",
    "district": "Rocky Mountain",
    "School Year": "2009/2010"
  },
  {
    "Subpop": "ABORIGINAL",
    "Completion Rate": ".76",
    "records": "52",
    "district": "Rocky Mountain",
    "School Year": "2010/2011"
  },
  {
    "Subpop": "ALL STUDENTS",
    "Completion Rate": ".81",
    "records": "368",
    "district": "Rocky Mountain",
    "School Year": "2010/2011"
  },
  {
    "Subpop": "ABORIGINAL",
    "Completion Rate": ".76",
    "records": "56",
    "district": "Rocky Mountain",
    "School Year": "2011/2012"
  },
  {
    "Subpop": "ALL STUDENTS",
    "Completion Rate": ".79",
    "records": "348",
    "district": "Rocky Mountain",
    "School Year": "2011/2012"
  },
  {
    "Subpop": "ABORIGINAL",
    "Completion Rate": ".75",
    "records": "61",
    "district": "Rocky Mountain",
    "School Year": "2012/2013"
  },
  {
    "Subpop": "ALL STUDENTS",
    "Completion Rate": ".77",
    "records": "398",
    "district": "Rocky Mountain",
    "School Year": "2012/2013"
  },
  {
    "Subpop": "ABORIGINAL",
    "Completion Rate": ".63",
    "records": "52",
    "district": "Rocky Mountain",
    "School Year": "2013/2014"
  },
  {
    "Subpop": "ALL STUDENTS",
    "Completion Rate": ".79",
    "records": "320",
    "district": "Rocky Mountain",
    "School Year": "2013/2014"
  },
  {
    "Subpop": "ABORIGINAL",
    "Completion Rate": ".76",
    "records": "46",
    "district": "Rocky Mountain",
    "School Year": "2014/2015"
  },
  {
    "Subpop": "ALL STUDENTS",
    "Completion Rate": ".76",
    "records": "323",
    "district": "Rocky Mountain",
    "School Year": "2014/2015"
  },
  {
    "Subpop": "ABORIGINAL",
    "Completion Rate": ".67",
    "records": "55",
    "district": "Rocky Mountain",
    "School Year": "2015/2016"
  },
  {
    "Subpop": "ALL STUDENTS",
    "Completion Rate": ".66",
    "records": "386",
    "district": "Rocky Mountain",
    "School Year": "2015/2016"
  },
  {
    "Subpop": "ABORIGINAL",
    "Completion Rate": ".82",
    "records": "56",
    "district": "Rocky Mountain",
    "School Year": "2016/2017"
  },
  {
    "Subpop": "ALL STUDENTS",
    "Completion Rate": ".71",
    "records": "347",
    "district": "Rocky Mountain",
    "School Year": "2016/2017"
  },
  {
    "Subpop": "ABORIGINAL",
    "Completion Rate": ".8",
    "records": "48",
    "district": "Rocky Mountain",
    "School Year": "2017/2018"
  },
  {
    "Subpop": "ALL STUDENTS",
    "Completion Rate": ".69",
    "records": "317",
    "district": "Rocky Mountain",
    "School Year": "2017/2018"
  }
];
         
console.log(data_64);
        


        view = new vega.View(vega.parse(spec), {
          renderer:  'canvas',  // renderer (canvas or svg)
          container: '#view',   // parent DOM container
          hover:     true       // enable hover processing
        });
        return view.runAsync();
      }
      //get the url parameters function
      function getUrlParameter(name) {
        name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
        var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
        var results = regex.exec(location.search);
        return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
      };
    </script>
</body>
</html>